(()=>{var t={880:()=>{Vue.component("cart",{template:'<div>\n    <button class="cart-button" type="button" v-on:click="showCart">Корзина</button>\n    <div v-if="cartVisible"  class="cart">\n      <slot></slot>\n    </div>\n  </div>',data:()=>({cartVisible:!1}),methods:{showCart(){this.cartVisible=!this.cartVisible}}})},237:()=>{Vue.component("goods-item",{template:'<div class="goods-item" >\n                  <ul>\n                    <li><img src="img/1.jpg" width="180" height="180" alt="foto"></li>\n                    <li>{{title}}</li>\n                    <li>{{price}} руб</li>\n                    <li><button :data-id="id" v-on:click="addGood" ><slot></slot></button></li>\n                  </ul>\n                </div>',props:["title","price","id"],methods:{addGood(t){const e=t.target.dataset.id;this.$emit("add",e)}}})},495:()=>{new Vue({el:"#app",data:{goods:[],filtredGoods:[],cartGoods:[]},methods:{searchHandler(t){""===t&&(this.filtredGoods=this.goods);const e=new RegExp(t,"gi");this.filtredGoods=this.goods.filter((t=>e.test(t.title)))},addToCart(t){const e=this.filtredGoods.find((e=>e.id==t));this.cartGoods.push(e),e.add="был добавлен в корзину",e.date=new Date,fetch("/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.cartGoods)}),fetch("/statistic",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},removeFromCart(t){const e=this.cartGoods.findIndex((e=>e.id==t)),o=this.cartGoods.splice(e,1);o.remove="был удалён из корзины",o.date1=new Date,console.log(o),fetch("/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.cartGoods)}),fetch("/statistic",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})},removeAllCart(){this.cartGoods=[],fetch("/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.cartGoods)})}},computed:{totalPrice(){let t=0;return this.cartGoods.forEach((e=>{t+=e.price})),t}},mounted(){fetch("/data").then((t=>t.json())).then((t=>{this.goods=t,this.filtredGoods=t})).catch((t=>{document.querySelector(".goods-list").insertAdjacentHTML("beforeend",`<h4>${error}</h4>`)})),fetch("/cart").then((t=>t.json())).then((t=>{this.cartGoods=t})).catch((t=>{console.log(t)}))}})},840:()=>{Vue.component("search",{template:'<input id="search" v-on:input="searchGoods"  v-model="search">',data:()=>({search:""}),methods:{searchGoods(){this.$emit("search",this.search)}}})}},e={};function o(s){var i=e[s];if(void 0!==i)return i.exports;var a=e[s]={exports:{}};return t[s](a,a.exports,o),a.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";o(880),o(237),o(840),o(495)})()})();